generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model agent_stats {
  id                  Int?
  agent_name          String?   @db.VarChar(255)
  allocated_extension String?   @db.VarChar(255)
  total_calls         String?   @db.VarChar(255)
  date                DateTime? @db.Date
  total_call_time     String?   @db.VarChar(255)
  call_time           String?   @db.VarChar(255)
  idle_time           String?   @db.VarChar(255)
  break_time          String?   @db.VarChar(255)
  created_at          DateTime? @default(now()) @db.Timestamp(6)
  updated_at          DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

model calls {
  id                          BigInt                       @id @default(autoincrement())
  call_id                     Int?
  campaign_name               String?                      @db.VarChar(255)
  useremail                   String?                      @db.VarChar(255)
  username                    String?                      @db.VarChar(255)
  unique_id                   String?                      @db.VarChar(255)
  start_time                  DateTime                     @default(now()) @db.Timestamp(0)
  answer_time                 DateTime?                    @db.Timestamp(0)
  end_time                    DateTime?                    @db.Timestamp(0)
  call_duration               Int?
  billed_duration             Int?
  source                      String?                      @db.VarChar(255)
  extension                   String?                      @db.VarChar(255)
  region                      String?                      @db.VarChar(255)
  charges                     Decimal?                     @db.Decimal(10, 2)
  direction                   String?                      @db.VarChar(255)
  destination                 String?                      @db.VarChar(255)
  disposition                 String?                      @db.VarChar(255)
  platform                    String?                      @db.VarChar(255)
  recording_url               String?                      @db.VarChar(2000)
  remote_recording_url        String?                      @db.VarChar(2000)
  call_type                   String?                      @db.VarChar(255)
  remarks                     String?                      @db.VarChar(22)
  prospect_name               String?                      @db.VarChar(55)
  prospect_email              String?                      @db.VarChar(55)
  prospect_company            String?                      @db.VarChar(100)
  job_title                   String?                      @db.VarChar(55)
  job_level                   String?                      @db.VarChar(255)
  data_source_type            String?                      @db.VarChar(255)
  created_at                  DateTime                     @default(now()) @db.Timestamp(0)
  updated_at                  DateTime                     @default(now()) @db.Timestamp(0)
  follow_up                   Boolean?                     @default(false)
  schedule_call               DateTime?                    @db.Timestamp(0)
  Followup_notes              String?                      @db.Text
  call_transcription_metadata call_transcription_metadata?
  notes                       notes[]
  qa_call_reviews             qa_call_reviews[]
  transcription_keywords      transcription_keywords[]
  transcription_segments      transcription_segments[]
  transcription_sessions      transcription_sessions[]
  transcripts                 transcripts[]
}

model campaigns {
  id            Int       @id @default(autoincrement())
  campaign_id   Int?
  campaign_name String?   @db.VarChar(255)
  start_date    DateTime? @db.DateTime(6)
  end_date      DateTime? @db.DateTime(6)
  allocations   String?   @db.VarChar(255)
  assigned_to   String?   @db.VarChar(255)
  status        String?   @db.VarChar(255)
  method        String?   @db.VarChar(255)
  created_at    DateTime? @db.Timestamp(6)
  updated_at    DateTime? @db.Timestamp(6)
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model extensions {
  id           Int?
  extension_id String?  @db.VarChar(255)
  password     String?  @db.VarChar(255)
  created_at   DateTime @default(now()) @db.Timestamp(0)
  updated_at   DateTime @default(now()) @db.Timestamp(0)

  @@ignore
}

model users {
  id                                                      Int                      @id @default(autoincrement())
  role                                                    String?                  @db.VarChar(255)
  unique_user_id                                          String?                  @unique(map: "unique_user_name") @db.VarChar(255)
  username                                                String?                  @db.VarChar(255)
  usermail                                                String?                  @db.VarChar(255)
  password                                                String?                  @db.VarChar(255)
  extension                                               String?                  @db.VarChar(255)
  status                                                  String?                  @db.VarChar(255)
  created_at                                              DateTime?                @db.Timestamp(6)
  updated_at                                              DateTime?                @db.Timestamp(6)
  agent_breaks                                            agent_breaks[]
  agent_heartbeats                                        agent_heartbeats[]
  agent_presence_events                                   agent_presence_events[]
  agent_sessions                                          agent_sessions[]
  document_shares                                         document_shares[]
  documents                                               documents[]
  notes                                                   notes[]
  password_resets                                         password_resets[]
  qa_call_reviews_qa_call_reviews_agent_user_idTousers    qa_call_reviews[]        @relation("qa_call_reviews_agent_user_idTousers")
  qa_call_reviews_qa_call_reviews_reviewer_user_idTousers qa_call_reviews[]        @relation("qa_call_reviews_reviewer_user_idTousers")
  transcription_sessions                                  transcription_sessions[]
}

model transcripts {
  id                     BigInt                   @id @default(autoincrement())
  call_id                BigInt
  ts                     DateTime                 @default(now()) @db.Timestamp(0)
  speaker                String                   @db.VarChar(32)
  text                   String                   @db.VarChar(2000)
  sentiment              String?                  @db.VarChar(32)
  confidence             Float?
  start_time             Decimal?                 @db.Decimal(10, 3)
  end_time               Decimal?                 @db.Decimal(10, 3)
  is_final               Boolean?                 @default(true)
  words_json             String?                  @db.LongText
  transcription_segments transcription_segments[]
  calls                  calls                    @relation(fields: [call_id], references: [id], onDelete: Cascade)

  @@index([call_id, ts])
  @@index([is_final], map: "idx_transcripts_is_final")
  @@index([speaker], map: "idx_transcripts_speaker")
  @@index([start_time], map: "idx_transcripts_start_time")
}

model agentic_campaigns {
  id           Int      @id @default(autoincrement())
  module       String   @unique @db.VarChar(255)
  name         String   @db.VarChar(255)
  agent_text   String   @db.Text
  session_text String   @db.Text
  created_at   DateTime @default(now()) @db.Timestamp(0)
  updated_at   DateTime @default(now()) @db.Timestamp(0)
}

model agentic_csv_files {
  id         Int      @id @default(autoincrement())
  name       String   @unique @db.VarChar(255)
  size       Int
  mtime      BigInt
  active     Boolean  @default(false)
  created_at DateTime @default(now()) @db.Timestamp(0)
  updated_at DateTime @default(now()) @db.Timestamp(0)
}

model dialing_contacts {
  id             BigInt                  @id @default(autoincrement())
  campaign_id    BigInt?
  csv_name       String?                 @db.VarChar(255)
  phone          String                  @db.VarChar(64)
  name           String?                 @db.VarChar(255)
  email          String?                 @db.VarChar(255)
  company        String?                 @db.VarChar(255)
  job_title      String?                 @db.VarChar(255)
  job_level      String?                 @db.VarChar(64)
  region         String?                 @db.VarChar(64)
  remarks        String?                 @db.Text
  priority       Int?                    @default(0)
  timezone       String?                 @db.VarChar(64)
  consent        Boolean?
  status         dialing_contacts_status @default(PENDING)
  attempts       Int                     @default(0)
  last_called_at DateTime?               @db.DateTime(0)
  created_at     DateTime                @default(now()) @db.DateTime(0)
  updated_at     DateTime                @default(now()) @db.DateTime(0)
}

model document_shares {
  document_id Int
  user_id     Int
  can_view    Boolean   @default(true)
  can_edit    Boolean   @default(false)
  shared_at   DateTime  @default(now()) @db.Timestamp(0)
  documents   documents @relation(fields: [document_id], references: [id], onDelete: Cascade, map: "fk_doc_shares_document")
  users       users     @relation(fields: [user_id], references: [id], onDelete: Cascade, map: "fk_doc_shares_user")

  @@id([document_id, user_id])
  @@index([user_id], map: "idx_doc_shares_user")
}

model documents {
  id               Int                  @id @default(autoincrement())
  type             documents_type       @default(guide)
  title            String               @db.VarChar(255)
  description      String               @db.Text
  file_url         String?              @db.VarChar(2000)
  file_mime        String?              @db.VarChar(255)
  file_size_bytes  BigInt?
  content_richtext String?              @db.LongText
  version          Int                  @default(1)
  tags_csv         String               @default("") @db.VarChar(500)
  created_by       Int
  visibility       documents_visibility @default(org)
  created_at       DateTime             @default(now()) @db.Timestamp(0)
  updated_at       DateTime             @default(now()) @db.Timestamp(0)
  document_shares  document_shares[]
  users            users                @relation(fields: [created_by], references: [id], map: "fk_documents_user")

  @@index([created_by], map: "idx_documents_created_by")
  @@index([type], map: "idx_documents_type")
  @@index([visibility], map: "idx_documents_visibility")
}

model notes {
  id         Int              @id @default(autoincrement())
  user_id    Int
  call_id    BigInt?
  phone_e164 String           @default("") @db.VarChar(32)
  title      String           @db.VarChar(255)
  body       String           @db.Text
  tags_csv   String           @default("") @db.VarChar(500)
  visibility notes_visibility @default(private)
  created_at DateTime         @default(now()) @db.Timestamp(0)
  updated_at DateTime         @default(now()) @db.Timestamp(0)
  calls      calls?           @relation(fields: [call_id], references: [id], map: "fk_notes_call")
  users      users            @relation(fields: [user_id], references: [id], onDelete: Cascade, map: "fk_notes_user")

  @@index([call_id], map: "idx_notes_call_id")
  @@index([phone_e164], map: "idx_notes_phone")
  @@index([user_id, created_at], map: "idx_notes_user_created")
}

model agent_breaks {
  id              BigInt                 @id @default(autoincrement())
  user_id         Int
  session_id      BigInt
  break_reason_id Int?
  start_at        DateTime               @default(now()) @db.DateTime(6)
  end_at          DateTime?              @db.DateTime(6)
  ended_by        agent_breaks_ended_by?
  break_reasons   break_reasons?         @relation(fields: [break_reason_id], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "fk_breaks_reason")
  agent_sessions  agent_sessions         @relation(fields: [session_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "fk_breaks_session")
  users           users                  @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "fk_breaks_user")

  @@index([break_reason_id], map: "fk_breaks_reason")
  @@index([session_id], map: "idx_breaks_session")
  @@index([start_at, end_at], map: "idx_breaks_time")
  @@index([user_id, session_id], map: "idx_breaks_user_session")
}

model agent_heartbeats {
  id             BigInt         @id @default(autoincrement())
  user_id        Int
  session_id     BigInt
  ts             DateTime       @default(now()) @db.DateTime(6)
  client_state   String?        @db.LongText
  ip             String?        @db.VarChar(45)
  agent_sessions agent_sessions @relation(fields: [session_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "fk_heartbeats_session")
  users          users          @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "fk_heartbeats_user")

  @@index([session_id, ts], map: "idx_heartbeats_session_ts")
  @@index([user_id, ts], map: "idx_heartbeats_user_ts")
}

model agent_presence_events {
  id             BigInt                             @id @default(autoincrement())
  user_id        Int
  session_id     BigInt
  event_type     agent_presence_events_event_type
  from_status    agent_presence_events_from_status?
  to_status      agent_presence_events_to_status?
  ts             DateTime                           @default(now()) @db.DateTime(6)
  meta           String?                            @db.LongText
  agent_sessions agent_sessions                     @relation(fields: [session_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "fk_presence_events_session")
  users          users                              @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "fk_presence_events_user")

  @@index([session_id, ts], map: "idx_presence_session_ts")
  @@index([event_type, ts], map: "idx_presence_type_ts")
  @@index([user_id, ts], map: "idx_presence_user_ts")
}

model agent_sessions {
  id                    BigInt                        @id @default(autoincrement())
  user_id               Int
  login_at              DateTime                      @default(now()) @db.DateTime(6)
  logout_at             DateTime?                     @db.DateTime(6)
  last_activity_at      DateTime                      @default(now()) @db.DateTime(6)
  login_ip              String?                       @db.VarChar(45)
  user_agent            String?                       @db.VarChar(255)
  ended_by              agent_sessions_ended_by?
  end_reason            String?                       @db.VarChar(255)
  is_active             Boolean                       @default(true)
  initial_status        agent_sessions_initial_status @default(AVAILABLE)
  agent_breaks          agent_breaks[]
  agent_heartbeats      agent_heartbeats[]
  agent_presence_events agent_presence_events[]
  users                 users                         @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "fk_agent_sessions_user")

  @@index([is_active], map: "idx_agent_sessions_active")
  @@index([last_activity_at], map: "idx_agent_sessions_last_activity")
  @@index([user_id, is_active], map: "idx_agent_sessions_user_active")
}

model break_reasons {
  id           Int            @id @default(autoincrement())
  code         String         @unique(map: "code") @db.VarChar(64)
  label        String         @db.VarChar(255)
  active       Boolean        @default(true)
  created_at   DateTime       @default(now()) @db.DateTime(6)
  updated_at   DateTime       @default(now()) @db.DateTime(6)
  agent_breaks agent_breaks[]
}

model dialer_sheets {
  id                Int       @id @default(autoincrement())
  name              String    @db.VarChar(255)
  size              BigInt?
  mtime             BigInt?
  path              String    @db.VarChar(512)
  active            Boolean?  @default(false)
  campaign_id       Int?
  campaign_name     String?   @db.VarChar(255)
  assigned_user_ids String?   @db.Text
  created_at        DateTime? @default(now()) @db.DateTime(0)
  updated_at        DateTime? @default(now()) @db.DateTime(0)
}

model password_resets {
  id          BigInt    @id @default(autoincrement())
  user_id     Int
  otp_hash    String    @db.VarChar(255)
  reset_token String    @unique(map: "uq_password_resets_reset_token") @db.Char(36)
  expires_at  DateTime  @db.DateTime(6)
  attempts    Int       @default(0)
  used_at     DateTime? @db.DateTime(6)
  created_at  DateTime  @default(now()) @db.DateTime(6)
  updated_at  DateTime  @default(now()) @db.DateTime(6)
  users       users     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "fk_password_resets_user")

  @@index([user_id, used_at, expires_at], map: "idx_password_resets_active")
  @@index([user_id], map: "idx_password_resets_user")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model call_transcription_metadata {
  id               BigInt    @id @default(autoincrement())
  call_id          BigInt    @unique(map: "uk_call_transcription")
  full_transcript  String?   @db.LongText
  language         String?   @default("en-US") @db.VarChar(10)
  avg_confidence   Float?    @db.Float
  word_count       Int?      @default(0) @db.UnsignedInt
  duration_seconds Decimal?  @db.Decimal(10, 3)
  provider         String?   @default("deepgram") @db.VarChar(50)
  metadata_json    String?   @db.LongText
  created_at       DateTime? @default(now()) @db.Timestamp(0)
  updated_at       DateTime? @default(now()) @db.Timestamp(0)
  calls            calls     @relation(fields: [call_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "fk_transcription_meta_call")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model transcription_keywords {
  id                    BigInt    @id @default(autoincrement())
  call_id               BigInt
  keyword               String    @db.VarChar(255)
  occurrences           Int?      @default(1) @db.UnsignedInt
  first_occurrence_time Decimal?  @db.Decimal(10, 3)
  category              String?   @db.VarChar(50)
  created_at            DateTime? @default(now()) @db.Timestamp(0)
  calls                 calls     @relation(fields: [call_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "fk_keyword_call")

  @@index([call_id], map: "idx_keyword_call_id")
  @@index([category], map: "idx_keyword_category")
  @@index([keyword], map: "idx_keyword_text")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model transcription_segments {
  id                 BigInt       @id @default(autoincrement())
  call_id            BigInt
  transcript_id      BigInt?
  speaker            String?      @default("unknown") @db.VarChar(32)
  text               String       @db.Text
  segment_start_time Decimal      @db.Decimal(10, 3)
  segment_end_time   Decimal      @db.Decimal(10, 3)
  confidence         Float?       @db.Float
  is_final           Boolean?     @default(true)
  words_json         String?      @db.LongText
  sentiment          String?      @db.VarChar(32)
  created_at         DateTime?    @default(now()) @db.Timestamp(0)
  calls              calls        @relation(fields: [call_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "fk_segment_call")
  transcripts        transcripts? @relation(fields: [transcript_id], references: [id], onUpdate: Restrict, map: "fk_segment_transcript")

  @@index([call_id], map: "idx_segment_call_id")
  @@index([is_final], map: "idx_segment_is_final")
  @@index([speaker], map: "idx_segment_speaker")
  @@index([segment_start_time], map: "idx_segment_start_time")
  @@index([transcript_id], map: "idx_segment_transcript_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model transcription_sessions {
  id            BigInt                         @id @default(autoincrement())
  session_id    String                         @unique(map: "uk_session_id") @db.VarChar(64)
  call_id       BigInt?
  user_id       Int?
  status        transcription_sessions_status? @default(pending)
  provider      String?                        @default("deepgram") @db.VarChar(50)
  language      String?                        @default("en-US") @db.VarChar(10)
  started_at    DateTime?                      @db.Timestamp(0)
  ended_at      DateTime?                      @db.Timestamp(0)
  error_message String?                        @db.Text
  created_at    DateTime?                      @default(now()) @db.Timestamp(0)
  updated_at    DateTime?                      @default(now()) @db.Timestamp(0)
  calls         calls?                         @relation(fields: [call_id], references: [id], onUpdate: Restrict, map: "fk_session_call")
  users         users?                         @relation(fields: [user_id], references: [id], onUpdate: Restrict, map: "fk_session_user")

  @@index([call_id], map: "idx_session_call_id")
  @@index([status], map: "idx_session_status")
  @@index([user_id], map: "idx_session_user_id")
}

model qa_call_reviews {
  id                                            BigInt   @id @default(autoincrement())
  call_id                                       BigInt
  reviewer_user_id                              Int
  agent_user_id                                 Int?
  overall_score                                 Int?     @db.TinyInt
  tone_score                                    Int?     @db.TinyInt
  compliance_score                              Int?     @db.TinyInt
  is_lead                                       Boolean  @default(false)
  lead_quality                                  String   @default("none") @db.VarChar(32)
  lead_tags_csv                                 String   @default("") @db.VarChar(500)
  disposition_override                          String?  @db.VarChar(255)
  comments                                      String?  @db.Text
  issues_json                                   String?  @db.LongText
  created_at                                    DateTime @default(now()) @db.Timestamp(0)
  updated_at                                    DateTime @default(now()) @db.Timestamp(0)
  users_qa_call_reviews_agent_user_idTousers    users?   @relation("qa_call_reviews_agent_user_idTousers", fields: [agent_user_id], references: [id], onUpdate: Restrict, map: "fk_qa_reviews_agent")
  calls                                         calls    @relation(fields: [call_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "fk_qa_reviews_call")
  users_qa_call_reviews_reviewer_user_idTousers users    @relation("qa_call_reviews_reviewer_user_idTousers", fields: [reviewer_user_id], references: [id], onUpdate: Restrict, map: "fk_qa_reviews_reviewer")

  @@index([agent_user_id], map: "idx_qa_reviews_agent_id")
  @@index([call_id], map: "idx_qa_reviews_call_id")
  @@index([is_lead], map: "idx_qa_reviews_is_lead")
  @@index([lead_quality], map: "idx_qa_reviews_lead_quality")
  @@index([reviewer_user_id], map: "idx_qa_reviews_reviewer_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model dm_form {
  f_id              Int      @id @default(autoincrement())
  f_campaign_name   String?  @db.VarChar(255)
  f_lead            String?  @db.VarChar(255)
  f_resource_name   String?  @db.VarChar(255)
  f_data_source     String?  @db.VarChar(255)
  unique_id         String?  @db.VarChar(255)
  f_salutation      String?  @db.VarChar(255)
  f_first_name      String?  @db.Text
  f_last_name       String?  @db.Text
  f_job_title       String?  @db.VarChar(255)
  f_department      String?  @db.VarChar(255)
  f_job_level       String?  @db.VarChar(255)
  f_email_add       String?  @db.VarChar(255)
  Secondary_Email   String?  @db.VarChar(255)
  f_conatct_no      String?  @db.VarChar(50)
  f_company_name    String?  @db.VarChar(255)
  f_website         String?  @db.VarChar(1000)
  f_address1        String?  @db.VarChar(1000)
  f_city            String?  @db.VarChar(255)
  f_state           String?  @db.VarChar(255)
  f_zip_code        String?  @db.VarChar(255)
  f_country         String?  @db.VarChar(255)
  f_emp_size        String?  @db.VarChar(255)
  f_industry        String?  @db.VarChar(255)
  f_sub_industry    String?  @db.VarChar(255)
  f_revenue         String?  @db.VarChar(255)
  f_revenue_link    String?  @db.VarChar(1000)
  f_profile_link    String?  @db.Text
  f_company_link    String?  @db.Text
  f_address_link    String?  @db.Text
  f_cq1             String?  @db.VarChar(255)
  f_cq2             String?  @db.Text
  f_cq3             String?  @db.VarChar(255)
  f_cq4             String?  @db.VarChar(255)
  f_cq5             String?  @db.VarChar(255)
  f_cq6             String?  @db.VarChar(255)
  f_cq7             String?  @db.VarChar(255)
  f_cq8             String?  @db.VarChar(255)
  f_cq9             String?  @db.VarChar(255)
  f_cq10            String?  @db.VarChar(255)
  f_asset_name1     String?  @db.VarChar(255)
  f_asset_name2     String?  @db.VarChar(255)
  f_call_recording  String?  @db.VarChar(255)
  f_email_status    String?  @db.VarChar(255)
  f_qa_status       String?  @db.VarChar(255)
  f_dq_reason1      String?  @db.VarChar(255)
  f_dq_reason2      String?  @db.VarChar(255)
  f_dq_reason3      String?  @db.VarChar(255)
  f_dq_reason4      String?  @db.VarChar(255)
  f_qa_comments     String?  @db.Text
  f_call_rating     String?  @db.VarChar(255)
  f_call_notes      String?  @db.Text
  feedback          String?  @db.Text
  f_call_links      String?  @db.VarChar(255)
  f_qa_name         String?  @db.VarChar(255)
  f_audit_date      String?  @db.VarChar(55)
  f_delivary_status String?  @db.VarChar(11)
  f_delivary_date   String?  @db.VarChar(11)
  f_delivary_by     String?  @db.VarChar(11)
  f_reject_reason   String?  @db.VarChar(255)
  added_by_user_id  String?  @db.VarChar(55)
  qualifyleads_by   String?  @db.VarChar(255)
  f_date            DateTime @default(now()) @db.Timestamp(0)
  form_status       Int
  f_script_url      String?  @db.VarChar(512)

  @@index([unique_id], map: "idx_dm_form_unique_id")
}

model extension_dids {
  extension_id String   @id @db.VarChar(64)
  did          String?  @db.VarChar(64)
  updated_at   DateTime @default(now()) @db.DateTime(0)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model api_metrics {
  id            BigInt   @id @default(autoincrement())
  endpoint      String   @db.VarChar(500)
  method        String   @db.VarChar(10)
  status_code   Int
  response_time Int
  user_id       Int?
  ip            String?  @db.VarChar(45)
  user_agent    String?  @db.VarChar(500)
  error_message String?  @db.Text
  timestamp     DateTime @default(now()) @db.Timestamp(0)

  @@index([endpoint(length: 255), timestamp], map: "idx_api_metrics_endpoint_time")
  @@index([status_code, timestamp], map: "idx_api_metrics_status_time")
  @@index([timestamp], map: "idx_api_metrics_time")
}

model audit_logs {
  id          BigInt   @id @default(autoincrement())
  user_id     Int?
  username    String?  @db.VarChar(255)
  action      String   @db.VarChar(255)
  resource    String   @db.VarChar(255)
  resource_id String?  @db.VarChar(255)
  changes     String?  @db.LongText
  ip          String?  @db.VarChar(45)
  user_agent  String?  @db.VarChar(500)
  outcome     String   @db.VarChar(50)
  timestamp   DateTime @default(now()) @db.Timestamp(0)

  @@index([action, timestamp], map: "idx_audit_logs_action_time")
  @@index([resource, timestamp], map: "idx_audit_logs_resource_time")
  @@index([user_id, timestamp], map: "idx_audit_logs_user_time")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model feature_flags {
  id                 Int      @id @default(autoincrement())
  name               String   @unique(map: "name") @db.VarChar(255)
  description        String?  @db.Text
  enabled            Boolean  @default(false)
  rollout_percentage Int      @default(0)
  target_roles       String?  @db.LongText
  target_users       String?  @db.LongText
  created_at         DateTime @default(now()) @db.Timestamp(0)
  modified_at        DateTime @default(now()) @db.Timestamp(0)
  modified_by        Int?
}

model resource_metrics {
  id                 BigInt   @id @default(autoincrement())
  cpu_usage          Float    @db.Float
  memory_used        BigInt
  memory_total       BigInt
  disk_used          BigInt
  disk_total         BigInt
  active_connections Int?
  timestamp          DateTime @default(now()) @db.Timestamp(0)

  @@index([timestamp], map: "idx_resource_metrics_time")
}

model system_config {
  id          Int      @id @default(autoincrement())
  category    String   @db.VarChar(100)
  key         String   @unique(map: "key") @db.VarChar(255)
  value       String   @db.LongText
  type        String   @db.VarChar(50)
  description String?  @db.Text
  modified_by Int?
  modified_at DateTime @default(now()) @db.Timestamp(0)
  created_at  DateTime @default(now()) @db.Timestamp(0)

  @@index([category], map: "idx_system_config_category")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model system_health_snapshots {
  id                BigInt   @id @default(autoincrement())
  frontend_status   String   @db.VarChar(50)
  backend_status    String   @db.VarChar(50)
  database_status   String   @db.VarChar(50)
  agentic_status    String   @db.VarChar(50)
  backend_response  Int?
  database_response Int?
  error_rate        Float?   @db.Float
  timestamp         DateTime @default(now()) @db.Timestamp(0)

  @@index([timestamp], map: "idx_system_health_time")
}

enum documents_type {
  template
  guide
  playbook
  snippet
  other
}

enum notes_visibility {
  private
  team
  public
}

enum documents_visibility {
  private
  org
  public
}

enum dialing_contacts_status {
  PENDING
  CALLING
  ANSWERED
  BUSY
  NO_ANSWER
  FAILED
  COMPLETED
  SKIPPED
}

enum agent_presence_events_event_type {
  LOGIN
  LOGOUT
  STATUS_CHANGE
  BREAK_START
  BREAK_END
  HEARTBEAT
  IDLE_AUTO
}

enum agent_presence_events_from_status {
  OFFLINE
  AVAILABLE
  ON_CALL
  IDLE
  BREAK
}

enum agent_presence_events_to_status {
  OFFLINE
  AVAILABLE
  ON_CALL
  IDLE
  BREAK
}

enum agent_breaks_ended_by {
  system
  user
}

enum agent_sessions_ended_by {
  system
  user
}

enum agent_sessions_initial_status {
  OFFLINE
  AVAILABLE
  ON_CALL
  IDLE
  BREAK
}

enum transcription_sessions_status {
  pending
  active
  completed
  failed
}
