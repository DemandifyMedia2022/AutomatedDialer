generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model agent_stats {
  id                  Int?
  agent_name          String?   @db.VarChar(255)
  allocated_extension String?   @db.VarChar(255)
  total_calls         String?   @db.VarChar(255)
  date                DateTime? @db.Date
  total_call_time     String?   @db.VarChar(255)
  call_time           String?   @db.VarChar(255)
  idle_time           String?   @db.VarChar(255)
  break_time          String?   @db.VarChar(255)
  created_at          DateTime? @default(now()) @db.Timestamp(6)
  updated_at          DateTime? @default(now()) @db.Timestamp(6)

  @@ignore
}

model calls {
  id               BigInt        @id @default(autoincrement())
  campaign_name    String?       @db.VarChar(255)
  useremail        String?       @db.VarChar(255)
  username         String?       @db.VarChar(255)
  unique_id        String?       @db.VarChar(255)
  start_time       DateTime      @default(now()) @db.Timestamp(0)
  answer_time      DateTime?     @db.Timestamp(0)
  end_time         DateTime?     @db.Timestamp(0)
  call_duration    Int?
  billed_duration  Int?
  source           String?       @db.VarChar(255)
  extension        String?       @db.VarChar(255)
  region           String?       @db.VarChar(255)
  charges          Decimal?      @db.Decimal(10, 2)
  direction        String?       @db.VarChar(255)
  destination      String?       @db.VarChar(255)
  disposition      String?       @db.VarChar(255)
  platform         String?       @db.VarChar(255)
  recording_url    String?       @db.VarChar(2000)
  call_type        String?       @db.VarChar(255)
  remarks          String?       @db.VarChar(22)
  prospect_name    String?       @db.VarChar(55)
  prospect_email   String?       @db.VarChar(55)
  prospect_company String?       @db.VarChar(100)
  job_title        String?       @db.VarChar(55)
  job_level        String?       @db.VarChar(255)
  data_source_type String?       @db.VarChar(255)
  created_at       DateTime      @default(now()) @db.Timestamp(0)
  updated_at       DateTime      @default(now()) @db.Timestamp(0)
  transcripts      transcripts[]
}

model campaigns {
  id            Int       @id @default(autoincrement())
  campaign_id   Int?
  campaign_name String?   @db.VarChar(255)
  start_date    DateTime? @db.DateTime(6)
  end_date      DateTime? @db.DateTime(6)
  allocations   String?   @db.VarChar(255)
  assigned_to   String?   @db.VarChar(255)
  status        String?   @db.VarChar(255)
  method        String?   @db.VarChar(255)
  created_at    DateTime? @db.Timestamp(6)
  updated_at    DateTime? @db.Timestamp(6)
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model extensions {
  id           Int?
  extension_id String?  @db.VarChar(255)
  password     String?  @db.VarChar(255)
  created_at   DateTime @default(now()) @db.Timestamp(0)
  updated_at   DateTime @default(now()) @db.Timestamp(0)

  @@ignore
}

model users {
  id             Int       @id @default(autoincrement())
  role           String?   @db.VarChar(255)
  unique_user_id String?   @unique(map: "unique_user_name") @db.VarChar(255)
  username       String?   @db.VarChar(255)
  usermail       String?   @db.VarChar(255)
  password       String?   @db.VarChar(255)
  extension      String?   @db.VarChar(255)
  status         String?   @db.VarChar(255)
  created_at     DateTime? @db.Timestamp(6)
  updated_at     DateTime? @db.Timestamp(6)
}

model transcripts {
  id         BigInt   @id @default(autoincrement())
  call_id    BigInt
  ts         DateTime @default(now()) @db.Timestamp(0)
  speaker    String   @db.VarChar(32)
  text       String   @db.VarChar(2000)
  sentiment  String?  @db.VarChar(32)
  confidence Float?
  calls      calls    @relation(fields: [call_id], references: [id], onDelete: Cascade)

  @@index([call_id, ts])
}

// Agentic campaign definitions (replaces Supabase)
model agentic_campaigns {
  id           Int      @id @default(autoincrement())
  module       String   @unique @db.VarChar(255)
  name         String   @db.VarChar(255)
  agent_text   String   @db.Text
  session_text String   @db.Text
  created_at   DateTime @default(now()) @db.Timestamp(0)
  updated_at   DateTime @default(now()) @db.Timestamp(0)
}

// Agentic CSV metadata (centralized in Node backend)
model agentic_csv_files {
  id         Int      @id @default(autoincrement())
  name       String   @unique @db.VarChar(255)
  size       Int
  mtime      BigInt
  active     Boolean  @default(false)
  created_at DateTime @default(now()) @db.Timestamp(0)
  updated_at DateTime @default(now()) @db.Timestamp(0)
}
